(function(c,b,a,d){c.fn.remoteChained=function(e){var f=c.extend({},c.fn.remoteChained.defaults,e);if(f.loading){f.clear=true}return this.each(function(){var g=this;var h=false;c(f.parents).each(function(){c(this).bind("change",function(){var j={};c(f.parents).each(function(){var l=c(this).attr(f.attribute);var k=(c(this).is("select")?c(":selected",this):c(this)).val();j[l]=k;if(f.depends){c(f.depends).each(function(){if(g!==this){var n=c(this).attr(f.attribute);var m=c(this).val();j[n]=m}})}});if(h&&c.isFunction(h.abort)){h.abort();h=false}if(f.clear){if(f.loading){i.call(g,{"":f.loading})}else{c("option",g).remove()}c(g).trigger("change")}h=c.getJSON(f.url,j,function(k){k=f.data(k);i.call(g,k);c(g).trigger("change")})});if(f.bootstrap){i.call(g,f.bootstrap);f.bootstrap=null}});function i(k){var j=c(":selected",g).val();c("option",g).remove();if(c.isArray(k)){c.each(k,function(l,m){c.each(m,function(n,p){if("selected"===n){j=p}else{var o=c("<option />").val(n).append(p);c(g).append(o)}})})}else{c.each(k,function(l,n){if(k.hasOwnProperty(l)){if("selected"===l){j=n}else{var m=c("<option />").val(l).append(n);c(g).append(m)}}})}c(g).children().each(function(){if(c(this).val()===j+""){c(this).attr("selected","selected")}});if(1===c("option",g).length&&c(g).val()===""){c(g).prop("disabled",true)}else{c(g).prop("disabled",false)}}})};c.fn.remoteChained.defaults={attribute:"name",depends:null,bootstrap:null,loading:null,clear:false,data:function(e){return e}}})(window.jQuery||window.Zepto,window,document);