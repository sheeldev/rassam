!function(a){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){define([],a)}else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),(b.payment||(b.payment={})).js=a()}}}(function(){var d,b,a;return(function c(f,k,h){function g(n,l){if(!k[n]){if(!f[n]){var i=typeof require=="function"&&require;if(!l&&i){return i(n,!0)}if(e){return e(n,!0)}throw new Error("Cannot find module '"+n+"'")}var m=k[n]={exports:{}};f[n][0].call(m.exports,function(o){var p=f[n][1][o];return g(p?p:o)},m,m.exports,c,f,k,h)}return k[n].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,f,e){(function(w){var q,z,h,p,k,o,r,s,v,u,n,i,x,l,A,t,y,C,m,B,j=[].indexOf||function(F){for(var E=0,D=this.length;E<D;E++){if(E in this&&this[E]===F){return E}}return -1};q=g("./utils");o=/(\d{1,4})/g;k=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:o,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:o,length:[14],cvcLength:[3],luhn:true},{type:"laser",pattern:/^(6706|6771|6709)/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:true},{type:"jcb",pattern:/^35/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^62/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[1-5]/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:"visa",pattern:/^4/,format:o,length:[13,14,15,16],cvcLength:[3],luhn:true}];h=function(F){var E,G,D;F=(F+"").replace(/\D/g,"");for(G=0,D=k.length;G<D;G++){E=k[G];if(E.pattern.test(F)){return E}}};p=function(F){var E,G,D;for(G=0,D=k.length;G<D;G++){E=k[G];if(E.type===F){return E}}};l=function(E){var J,I,H,F,G,D;H=true;F=0;I=(E+"").split("").reverse();for(G=0,D=I.length;G<D;G++){J=I[G];J=parseInt(J,10);if((H=!H)){J*=2}if(J>9){J-=9}F+=J}return F%10===0};x=function(E){var D;if((E.selectionStart!=null)&&E.selectionStart!==E.selectionEnd){return true}if(typeof document!=="undefined"&&document!==null?(D=document.selection)!=null?typeof D.createRange==="function"?D.createRange().text:void 0:void 0:void 0){return true}return false};A=function(D){return setTimeout((function(E){return function(){var G,F;G=D.currentTarget;F=q.val(G);F=z.fns.formatCardNumber(F);return q.val(G,F)}})(this))};v=function(I){var D,K,F,E,H,J,G;K=String.fromCharCode(I.which);if(!/^\d+$/.test(K)){return}H=I.currentTarget;G=q.val(H);D=h(G+K);F=(G.replace(/\D/g,"")+K).length;J=16;if(D){J=D.length[D.length.length-1]}if(F>=J){return}if((H.selectionStart!=null)&&H.selectionStart!==G.length){return}if(D&&D.type==="amex"){E=/^(\d{4}|\d{4}\s\d{6})$/}else{E=/(?:^|\s)(\d{4})$/}if(E.test(G)){I.preventDefault();return q.val(H,G+" "+K)}else{if(E.test(G+K)){I.preventDefault();return q.val(H,G+K+" ")}}};r=function(F){var E,D;E=F.currentTarget;D=q.val(E);if(F.meta){return}if(F.which!==8){return}if((E.selectionStart!=null)&&E.selectionStart!==D.length){return}if(/\d\s$/.test(D)){F.preventDefault();return q.val(E,D.replace(/\d\s$/,""))}else{if(/\s\d?$/.test(D)){F.preventDefault();return q.val(E,D.replace(/\s\d?$/,""))}}};u=function(E){var G,D,F;G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}D=E.currentTarget;F=q.val(D)+G;if(/^\d$/.test(F)&&(F!=="0"&&F!=="1")){E.preventDefault();return q.val(D,"0"+F+" / ")}else{if(/^\d\d$/.test(F)){E.preventDefault();return q.val(D,""+F+" / ")}}};n=function(E){var G,D,F;G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}D=E.currentTarget;F=q.val(D);if(/^\d\d$/.test(F)){return q.val(D,""+F+" / ")}};i=function(F){var D,E,G;D=String.fromCharCode(F.which);if(D!=="/"){return}E=F.currentTarget;G=q.val(E);if(/^\d$/.test(G)&&G!=="0"){return q.val(E,"0"+G+" / ")}};s=function(F){var E,D;if(F.metaKey){return}E=F.currentTarget;D=q.val(E);if(F.which!==8){return}if((E.selectionStart!=null)&&E.selectionStart!==D.length){return}if(/\d(\s|\/)+$/.test(D)){F.preventDefault();return q.val(E,D.replace(/\d(\s|\/)*$/,""))}else{if(/\s\/\s?\d?$/.test(D)){F.preventDefault();return q.val(E,D.replace(/\s\/\s?\d?$/,""))}}};m=function(E){var D;if(E.metaKey||E.ctrlKey){return true}if(E.which===32){return E.preventDefault()}if(E.which===0){return true}if(E.which<33){return true}D=String.fromCharCode(E.which);if(!/[\d\s]/.test(D)){return E.preventDefault()}};y=function(G){var D,H,F,E;F=G.currentTarget;H=String.fromCharCode(G.which);if(!/^\d+$/.test(H)){return}if(x(F)){return}E=(q.val(F)+H).replace(/\D/g,"");D=h(E);if(D){if(!(E.length<=D.length[D.length.length-1])){return G.preventDefault()}}else{if(!(E.length<=16)){return G.preventDefault()}}};C=function(F){var G,E,D;E=F.currentTarget;G=String.fromCharCode(F.which);if(!/^\d+$/.test(G)){return}if(x(E)){return}D=q.val(E)+G;D=D.replace(/\D/g,"");if(D.length>6){return F.preventDefault()}};t=function(E){var G,D,F;D=E.currentTarget;G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}F=q.val(D)+G;if(!(F.length<=4)){return E.preventDefault()}};B=function(H){var F,E,D,G,I;G=H.currentTarget;I=q.val(G);D=z.fns.cardType(I)||"unknown";if(!q.hasClass(G,D)){F=(function(){var L,K,J;J=[];for(L=0,K=k.length;L<K;L++){E=k[L];J.push(E.type)}return J})();q.removeClass(G,"unknown");q.removeClass(G,F.join(" "));q.addClass(G,D);q.toggleClass(G,"identified",D!=="unknown");return q.trigger(G,"payment.cardType",D)}};z=(function(){function D(){}D.fns={cardExpiryVal:function(H){var I,G,E,F;H=H.replace(/\s/g,"");F=H.split("/",2),I=F[0],E=F[1];if((E!=null?E.length:void 0)===2&&/^\d+$/.test(E)){G=(new Date).getFullYear();G=G.toString().slice(0,2);E=G+E}I=parseInt(I,10);E=parseInt(E,10);return{month:I,year:E}},validateCardNumber:function(F){var E,G;F=(F+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(F)){return false}E=h(F);if(!E){return false}return(G=F.length,j.call(E.length,G)>=0)&&(E.luhn===false||l(F))},validateCardExpiry:function(J,F){var G,E,I,H;if(typeof J==="object"&&"month" in J){H=J,J=H.month,F=H.year}if(!(J&&F)){return false}J=q.trim(J);F=q.trim(F);if(!/^\d+$/.test(J)){return false}if(!/^\d+$/.test(F)){return false}if(!(parseInt(J,10)<=12)){return false}if(F.length===2){I=(new Date).getFullYear();I=I.toString().slice(0,2);F=I+F}E=new Date(F,J);G=new Date;E.setMonth(E.getMonth()-1);E.setMonth(E.getMonth()+1,1);return E>G},validateCardCVC:function(F,G){var H,E;F=q.trim(F);if(!/^\d+$/.test(F)){return false}if(G){return H=F.length,j.call((E=p(G))!=null?E.cvcLength:void 0,H)>=0}else{return F.length>=3&&F.length<=4}},cardType:function(E){var F;if(!E){return null}return((F=h(E))!=null?F.type:void 0)||null},formatCardNumber:function(G){var F,E,I,H;F=h(G);if(!F){return G}I=F.length[F.length.length-1];G=G.replace(/\D/g,"");G=G.slice(0,+I+1||9000000000);if(F.format.global){return(H=G.match(F.format))!=null?H.join(" "):void 0}else{E=F.format.exec(G);if(E!=null){E.shift()}return E!=null?E.join(" "):void 0}}};D.restrictNumeric=function(E){return q.on(E,"keypress",m)};D.cardExpiryVal=function(E){return D.fns.cardExpiryVal(q.val(E))};D.formatCardCVC=function(E){D.restrictNumeric(E);q.on(E,"keypress",t);return E};D.formatCardExpiry=function(E){D.restrictNumeric(E);q.on(E,"keypress",C);q.on(E,"keypress",u);q.on(E,"keypress",i);q.on(E,"keypress",n);q.on(E,"keydown",s);return E};D.formatCardNumber=function(E){D.restrictNumeric(E);q.on(E,"keypress",y);q.on(E,"keypress",v);q.on(E,"keydown",r);q.on(E,"keyup",B);q.on(E,"paste",A);return E};return D})();z.J=q;f.exports=z;w.Payment=z}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./utils":2}],2:[function(i,h,g){var f,j,e;f=function(k){return document.querySelectorAll(k)};e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;f.trim=function(k){if(k===null){return""}else{return(k+"").replace(e,"")}};j=/\r/g;f.val=function(l,m){var k;if(arguments.length>1){return l.value=m}else{k=l.value;if(typeof k==="string"){return k.replace(j,"")}else{if(k===null){return""}else{return k}}}};f.on=function(l,m,k){l.addEventListener(m,k);return l};f.addClass=function(l,k){var m;if(l.length){return(function(){var p,o,n;n=[];for(p=0,o=l.length;p<o;p++){m=l[p];n.push(f.addClass(m,k))}return n})()}if(l.classList){return l.classList.add(k)}else{return l.className+=" "+k}};f.hasClass=function(l,k){if(l.classList){return l.classList.contains(k)}else{return new RegExp("(^| )"+k+"( |$)","gi").test(l.className)}};f.removeClass=function(o,n){var m,r,q,l,p,k;if(o.length){return(function(){var u,t,s;s=[];for(u=0,t=o.length;u<t;u++){r=o[u];s.push(f.removeClass(r,n))}return s})()}if(o.classList){p=n.split(" ");k=[];for(q=0,l=p.length;q<l;q++){m=p[q];k.push(o.classList.remove(m))}return k}else{return o.className=o.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}};f.toggleClass=function(m,l,k){var n;if(m.length){return(function(){var q,p,o;o=[];for(q=0,p=m.length;q<p;q++){n=m[q];o.push(f.toggleClass(n,l,k))}return o})()}if(k){if(!f.hasClass(m,l)){return f.addClass(m,l)}}else{return f.removeClass(m,l)}};f.trigger=function(l,k,n){var m;if(window.CustomEvent){m=new CustomEvent(k,{detail:n})}else{m=document.createEvent("CustomEvent");if(m.initCustomEvent){m.initCustomEvent(k,true,true,n)}else{m.initEvent(k,true,true,n)}}return l.dispatchEvent(m)};h.exports=f},{}]},{},[1])(1)});