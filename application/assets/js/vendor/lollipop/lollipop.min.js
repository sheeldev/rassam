(function(){var b=function(){var c={getParams:function(){return a.params},setOptions:function(d){a.setOptions(d);return this},close:function(){a.close()},open:function(d,e){a.open(d);this.image=e},save:function(g,e,d,f,h){a.params.onSave(g,e,d,f,h)},image:undefined};return c};var a={params:{path:".",image_url:"",thumb_container:"",hash:"",filename:"",type:"",itemid:"",appendTo:"body",enabledCORS:false,gallery_icon:false,camera_icon:false,upload_icon:false,save_icon:false,onSave:function(f,d,c,e,g){}},cache:{},getThumbContainer:function(){return a.params.thumb_container},setOptions:function(c){this.extend(a.params,c)},extend:function(c){c=c||{};for(var e=1;e<arguments.length;e++){var f=arguments[e];if(!f){continue}for(var d in f){if(f.hasOwnProperty(d)){if(typeof f[d]==="object"&&f.constructor==Object){a.extend(c[d],f[d])}else{c[d]=f[d]}}}}return c},getPath:function(){return a.params.path?a.params.path+"/":""},close:function(){a.opened=false;a.container.style.display="none";var c=a.container.querySelector("#lollipop-frame");a.container.querySelector("#lollipop-frame-container").removeChild(c);document.body.classList.remove("noscroll")},container:undefined,opened:false,open:function(d){if(a.opened===true){return}a.opened=true;a.extend(a.params,d);document.body.classList.add("noscroll");if(document.querySelector("#lollipop-editor-container")==undefined){var f=document.createElement("link");f.rel="stylesheet";f.href=a.getPath()+"assets/css/lib/integrate.css";document.querySelector("head").appendChild(f);var e='<section id="lollipop-editor-container"><div id="lollipop-frame-container"><div class="lollipop-close" onclick="Lollipop.close()">&times;</div></div><div class="uil-ripple-css" style="-webkit-transform:scale(0.6)"><div></div><div></div></div></section>';var h=document.createElement("div");h.innerHTML=e;a.container=document.querySelector(a.params.appendTo).appendChild(h.firstChild);a.container.querySelector("#lollipop-frame-container").style.display="none"}else{a.container.style.display="block";a.container.querySelector(".uil-ripple-css").style.display="block";a.container.querySelector("#lollipop-frame-container").style.display="none"}var c;var g=a.getFinalImage(a.params.image_url);if(typeof g==="object"){g.onload=function(i){a.integrateFrame(i.target.responseText)}}else{if(typeof g==="string"){a.integrateFrame(g)}}},integrateFrame:function(c){var d=document.createElement("iframe");d.setAttribute("id","lollipop-frame");a.container.querySelector("#lollipop-frame-container").appendChild(d);d.src=a.getPath()+"index.html?src=null";d.onload=function(){a.container.querySelector("#lollipop-frame-container").style.display="block";a.container.querySelector(".uil-ripple-css").style.display="none";d.contentWindow.jQuery(".setting").perfectScrollbar();d.contentWindow.jQuery(".theme").perfectScrollbar();d.contentWindow.image.src=c;d.contentWindow.image.onload=function(){d.contentWindow.initCanvas()};if(a.params.upload_icon===true){d.contentWindow.document.querySelector("#upload-btn").style.display="block"}if(a.params.save_icon===true){d.contentWindow.document.querySelector("#save-btn").style.display="block"}if(a.params.gallery_icon===false){d.contentWindow.document.querySelector("#gallery-btn").style.display="none"}if(a.params.camera_icon===false){d.contentWindow.document.querySelector("#camera-btn").style.display="none";d.contentWindow.Lollipop=window.Lollipop}}},getFinalImage:function(c){if(a.params.enabledCORS||a.urlInSameDomain(c)||c.indexOf("data:image")!=-1){return c}if(a.cache[c]){return a.cache[c]}var d=a.ajax(iL.AJAXURL,"do=lollipopgetimage&url="+a.absoluteUrl(c));d.onload=function(f){if(f.target.status>=200&&f.target.status<400){a.cache[c]=f.target.responseText}};return d},urlInSameDomain:function(c){return c.indexOf(document.domain)>-1||c.indexOf("//")===-1},absoluteUrl:function(d){if(d.indexOf("//")>-1){return d}var c=document.createElement("a");c.href=d;return c.href},ajax:function(c,e){var d=new XMLHttpRequest();d.open("POST",c,true);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(e);return d}};window.Lollipop=new b()})();var imageEditor=window.Lollipop.setOptions({path:iL.CDNJS+"vendor/lollipop",appendTo:"body",gallery_icon:false,camera_icon:false,save_icon:true,share_icon:false,onSave:function(d,b,a,c,e){jQuery(".uil-ripple-css").show();jQuery("#save").css("opacity","0.1");window.$.ajax({type:"POST",url:iL.AJAXURL,data:{"do":"lollipopsaveimage",imgData:d,type:b,filename:a,itemid:c,hash:e},success:function(f){jQuery(".uil-ripple-css").hide();jQuery("#save").css("opacity","1");if(f==1){csrc=jQuery("#fileuploader_iframe").contents().find("#"+window.Lollipop.getParams().thumb_container).attr("src");jQuery("#fileuploader_iframe").contents().find("#"+window.Lollipop.getParams().thumb_container).prop("src",csrc+"?"+new Date().getTime());alert("Image saved successfully!")}else{alert("Image was not saved!")}}})}});