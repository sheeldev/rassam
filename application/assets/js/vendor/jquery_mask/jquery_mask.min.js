(function(a,c,b){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(c||b)}}}(function(d){var f=function(k,h,j){var m={invalid:[],getCaret:function(){try{var p,s=0,o=k.get(0),n=document.selection,r=o.selectionStart;if(n&&navigator.appVersion.indexOf("MSIE 10")===-1){p=n.createRange();p.moveStart("character",-m.val().length);s=p.text.length}else{if(r||r==="0"){s=r}}return s}catch(q){}},setCaret:function(q){try{if(k.is(":focus")){var n,o=k.get(0);if(o.setSelectionRange){o.setSelectionRange(q,q)}else{n=o.createTextRange();n.collapse(true);n.moveEnd("character",q);n.moveStart("character",q);n.select()}}}catch(p){}},events:function(){k.on("keydown.mask",function(n){k.data("mask-keycode",n.keyCode||n.which);k.data("mask-previus-value",k.val());k.data("mask-previus-caret-pos",m.getCaret());m.maskDigitPosMapOld=m.maskDigitPosMap}).on(d.jMaskGlobals.useInput?"input.mask":"keyup.mask",m.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){k.keydown().keyup()},100)}).on("change.mask",function(){k.data("changed",true)}).on("blur.mask",function(){if(i!==m.val()&&!k.data("changed")){k.trigger("change")}k.data("changed",false)}).on("blur.mask",function(){i=m.val()}).on("focus.mask",function(n){if(j.selectOnFocus===true){d(n.target).select()}}).on("focusout.mask",function(){if(j.clearIfNotMatch&&!g.test(m.val())){m.val("")}})},getRegexMask:function(){var p=[],v,u,o,n,t,s;for(var q=0;q<h.length;q++){v=l.translation[h.charAt(q)];if(v){u=v.pattern.toString().replace(/.{1}$|^.{1}/g,"");o=v.optional;n=v.recursive;if(n){p.push(h.charAt(q));t={digit:h.charAt(q),pattern:u}}else{p.push(!o&&!n?u:(u+"?"))}}else{p.push(h.charAt(q).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}}s=p.join("");if(t){s=s.replace(new RegExp("("+t.digit+"(.*"+t.digit+")?)"),"($1)?").replace(new RegExp(t.digit,"g"),t.pattern)}return new RegExp(s)},destroyEvents:function(){k.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(n){var o=k.is("input"),q=o?"val":"text",p;if(arguments.length>0){if(k[q]()!==n){k[q](n)}p=k}else{p=k[q]()}return p},calculateCaretPosition:function(){var x=k.data("mask-previus-value")||"",p=m.getMasked(),v=m.getCaret();if(x!==p){var q=k.data("mask-previus-caret-pos")||0,y=p.length,u=x.length,t=0,o=0,n=0,w=0,s=0;for(s=v;s<y;s++){if(!m.maskDigitPosMap[s]){break}o++}for(s=v-1;s>=0;s--){if(!m.maskDigitPosMap[s]){break}t++}for(s=v-1;s>=0;s--){if(m.maskDigitPosMap[s]){n++}}for(s=q-1;s>=0;s--){if(m.maskDigitPosMapOld[s]){w++}}if(v>u){v=y*10}else{if(q>=v&&q!==u){if(!m.maskDigitPosMapOld[v]){var r=v;v-=w-n;v-=t;if(m.maskDigitPosMap[v]){v=r}}}else{if(v>q){v+=n-w;v+=o}}}}return v},behaviour:function(q){q=q||window.event;m.invalid=[];var p=k.data("mask-keycode");if(d.inArray(p,l.byPassKeys)===-1){var o=m.getMasked(),n=m.getCaret();setTimeout(function(){m.setCaret(m.calculateCaretPosition())},10);m.val(o);m.setCaret(n);return m.callbacks(q)}},getMasked:function(E,I){var G=[],z=I===undefined?m.val():I+"",A=0,p=h.length,u=0,x=z.length,q=1,C="push",D=-1,w=0,r=[],n,H;if(j.reverse){C="unshift";q=-1;n=0;A=p-1;u=x-1;H=function(){return A>-1&&u>-1}}else{n=p-1;H=function(){return A<p&&u<x}}var o;while(H()){var t=h.charAt(A),B=z.charAt(u),s=l.translation[t];if(s){if(B.match(s.pattern)){G[C](B);if(s.recursive){if(D===-1){D=A}else{if(A===n&&A!==D){A=D-q}}if(n===D){A-=q}}A+=q}else{if(B===o){w--;o=undefined}else{if(s.optional){A+=q;u-=q}else{if(s.fallback){G[C](s.fallback);A+=q;u-=q}else{m.invalid.push({p:u,v:B,e:s.pattern})}}}}u+=q}else{if(!E){G[C](t)}if(B===t){r.push(u);u+=q}else{o=t;r.push(u+w);w++}A+=q}}var y=h.charAt(n);if(p===x+1&&!l.translation[y]){G.push(y)}var F=G.join("");m.mapMaskdigitPositions(F,r,x);return F},mapMaskdigitPositions:function(n,p,q){var r=j.reverse?n.length-q:0;m.maskDigitPosMap={};for(var o=0;o<p.length;o++){m.maskDigitPosMap[p[o]+r]=1}},callbacks:function(o){var q=m.val(),p=q!==i,n=[q,o,k,j],r=function(t,u,s){if(typeof j[t]==="function"&&u){j[t].apply(this,s)}};r("onChange",p===true,n);r("onKeyPress",p===true,n);r("onComplete",q.length===h.length,n);r("onInvalid",m.invalid.length>0,[q,o,k,m.invalid,j])}};k=d(k);var l=this,i=m.val(),g;h=typeof h==="function"?h(m.val(),undefined,k,j):h;l.mask=h;l.options=j;l.remove=function(){var n=m.getCaret();m.destroyEvents();m.val(l.getCleanVal());m.setCaret(n);return k};l.getCleanVal=function(){return m.getMasked(true)};l.getMaskedVal=function(n){return m.getMasked(false,n)};l.init=function(p){p=p||false;j=j||{};l.clearIfNotMatch=d.jMaskGlobals.clearIfNotMatch;l.byPassKeys=d.jMaskGlobals.byPassKeys;l.translation=d.extend({},d.jMaskGlobals.translation,j.translation);l=d.extend(true,{},l,j);g=m.getRegexMask();if(p){m.events();m.val(m.getMasked())}else{if(j.placeholder){k.attr("placeholder",j.placeholder)}if(k.data("mask")){k.attr("autocomplete","off")}for(var o=0,n=true;o<h.length;o++){var r=l.translation[h.charAt(o)];if(r&&r.recursive){n=false;break}}if(n){k.attr("maxlength",h.length)}m.destroyEvents();m.events();var q=m.getCaret();m.val(m.getMasked());m.setCaret(q)}};l.init(!k.is("input"))};d.maskWatchers={};var e=function(){var h=d(this),i={},j="data-mask-",g=h.attr("data-mask");if(h.attr(j+"reverse")){i.reverse=true}if(h.attr(j+"clearifnotmatch")){i.clearIfNotMatch=true}if(h.attr(j+"selectonfocus")==="true"){i.selectOnFocus=true}if(a(h,g,i)){return h.data("mask",new f(this,g,i))}},a=function(k,g,h){h=h||{};var l=d(k).data("mask"),m=JSON.stringify,i=d(k).val()||d(k).text();try{if(typeof g==="function"){g=g(i)}return typeof l!=="object"||m(l.options)!==m(h)||l.mask!==g}catch(j){}},c=function(g){var i=document.createElement("div"),h;g="on"+g;h=(g in i);if(!h){i.setAttribute(g,"return;");h=typeof i[g]==="function"}i=null;return h};d.fn.mask=function(h,l){l=l||{};var g=this.selector,m=d.jMaskGlobals,j=m.watchInterval,k=l.watchInputs||m.watchInputs,i=function(){if(a(this,h,l)){return d(this).data("mask",new f(this,h,l))}};d(this).each(i);if(g&&g!==""&&k){clearInterval(d.maskWatchers[g]);d.maskWatchers[g]=setInterval(function(){d(document).find(g).each(i)},j)}return this};d.fn.masked=function(g){return this.data("mask").getMaskedVal(g)};d.fn.unmask=function(){clearInterval(d.maskWatchers[this.selector]);delete d.maskWatchers[this.selector];return this.each(function(){var g=d(this).data("mask");if(g){g.remove().removeData("mask")}})};d.fn.cleanVal=function(){return this.data("mask").getCleanVal()};d.applyDataMask=function(g){g=g||d.jMaskGlobals.maskElements;var h=(g instanceof d)?g:d(g);h.filter(d.jMaskGlobals.dataMaskAttr).each(e)};var b={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:true,watchInterval:300,watchInputs:true,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&c("input"),watchDataMask:false,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{"0":{pattern:/\d/},"9":{pattern:/\d/,optional:true},"#":{pattern:/\d/,recursive:true},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};d.jMaskGlobals=d.jMaskGlobals||{};b=d.jMaskGlobals=d.extend(true,{},b,d.jMaskGlobals);if(b.dataMask){d.applyDataMask()}setInterval(function(){if(d.jMaskGlobals.watchDataMask){d.applyDataMask()}},b.watchInterval)},window.jQuery,window.Zepto));