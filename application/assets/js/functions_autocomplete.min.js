var iL_AutoComplete;function Sheel_AutoComplete(e,t){var h=this;if(this.clearField=!1,this.minLength=2,this.elem=fetch_js_object(e),this.highlighted=-1,this.arrItens=[],this.ajaxTarget=iL.AJAXURL+"?do=autocomplete&token="+iL.TOKEN,this.chooseFunc=null,this.div=fetch_js_object(t),this.hideSelects=!1,this.ajaxReq=createRequest(),jQuery("#"+e).length<=0)return!1;h.elem.onkeydown=function(e){var t=h.getKeyCode(e);switch(t){case 9:case 13:return"undefined"!=h.highlighted.id&&h.acChoose(h.highlighted.id),h.hideDiv(),!1;case 27:return h.hideDiv(),!1;case 38:return h.changeHighlight("up"),!1;case 40:return h.changeHighlight("down"),!1}},h.elem.onkeyup=function(e){var t=h.getKeyCode(e);switch(t){case 9:case 27:case 38:case 40:return;case 13:return!1;default:if(h.ajaxReq.abort(),!(h.elem.value.length>=h.minLength))return;if(void 0!=h.ajaxReq){h.ajaxReq.open("POST",h.ajaxTarget,!0),h.ajaxReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.ajaxReq.onreadystatechange=h.acResult;var a="q="+h.elem.value;h.ajaxReq.send(a)}h.highlighted=""}},h.elem.onblur=function(){h.hideDiv()},h.elem.focus=function(){},this.setElemValue=function(){var e=h.highlighted.firstChild;h.elem.value=e.innerTEXT},this.highlightThis=function(e,t){"y"==t?(h.highlighted.className="",h.highlighted=e,h.highlighted.className="selected",h.setElemValue(e)):(e.className="",h.highlighted="")},this.changeHighlight=function(e){if(""!=h.highlighted&&null!=h.highlighted){switch(h.highlighted.className="",e){case"up":h.highlighted.parentNode.firstChild==h.highlighted?h.highlighted=h.highlighted.parentNode.lastChild:h.highlighted=h.highlighted.previousSibling;break;case"down":h.highlighted.parentNode.lastChild==h.highlighted?h.highlighted=h.highlighted.parentNode.firstChild:h.highlighted=h.highlighted.nextSibling}h.highlighted.className="selected",h.setElemValue()}else{switch(e){case"up":h.highlighted=h.div.firstChild.lastChild;break;case"down":h.highlighted=h.div.firstChild.firstChild}h.highlighted.className="selected",h.setElemValue()}},this.acResult=function(){if(4==h.ajaxReq.readyState){h.showDiv();var e=h.ajaxReq.responseXML;if(void 0==e)return!1;var t=e.getElementsByTagName("item"),a=t.length;h.div.innerHTML="";var l=document.createElement("div");if(h.div.appendChild(l),a>0)for(i=0;i<a;i++){h.arrItens[t[i].getAttribute("id")]=[],h.arrItens[t[i].getAttribute("id")].label=t[i].getAttribute("label"),h.arrItens[t[i].getAttribute("id")].text=t[i].getAttribute("text"),h.arrItens[t[i].getAttribute("id")].searchmode=t[i].getAttribute("searchmode"),h.arrItens[t[i].getAttribute("id")].flabel=t[i].getAttribute("flabel");var n=document.createElement("div");n.id=t[i].getAttribute("id"),n.onmouseover=function(){this.className="selected"},n.onmouseout=function(){this.className=""},n.onmousedown=function(){return h.acChoose(this.id),h.hideDiv(),!1};var s=document.createElement("a");s.href="#",s.onclick=function(){return!1},s.innerHTML=unescape(t[i].getAttribute("label")),null!=t[i].getAttribute("text")?s.innerTEXT=unescape(t[i].getAttribute("text")):s.innerTEXT=unescape(t[i].getAttribute("label")),n.appendChild(s),l.appendChild(n)}else h.hideDiv()}},this.acChoose=function(e){h.hideDiv(),this.clearField?h.elem.value="":void 0!=e&&(h.elem.value=unescape(h.arrItens[e].text),fetch_js_object("searchmode").value=unescape(h.arrItens[e].searchmode)),fetch_js_object("globalsearch").submit()},this.positionDiv=function(){},this.hideDiv=function(){h.highlighted="",h.div.style.display="none",h.handleSelects("")},this.showDiv=function(){h.highlighted="",h.positionDiv(),h.handleSelects("none"),h.div.style.display="block"},this.handleSelects=function(e){if(!h.hideSelects)return!1;for(var t=document.getElementsByTagName("SELECT"),a=0;a<t.length;a++)t[a].style.display=e},this.getKeyCode=function(e){return e?e.keyCode:window.event?window.event.keyCode:void 0},this.getEventSource=function(e){return e?e.target:window.event?window.event.srcElement:void 0},this.cancelEvent=function(e){e&&(e.preventDefault(),e.stopPropagation()),window.event&&(window.event.returnValue=!1)}}function createRequest(){try{var e;e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(h){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){e=!1}}}if(e)return e}iL_AutoComplete=new Sheel_AutoComplete("search_keywords_id","search_autocomplete");